{
  "$schema": "https://opencode.ai/config.json",
  "mcp": {
    "git": {
      "type": "local",
      "command": [
        "git-mcp-server"
      ],
      "enabled": true,
      "metadata": {
        "description": "Git operations for repository management",
        "required_env": [],
        "optional_env": [
          "GIT_AUTHOR_NAME",
          "GIT_AUTHOR_EMAIL"
        ],
        "tools": [
          "git_status",
          "git_log",
          "git_diff",
          "git_show",
          "git_branch",
          "git_checkout",
          "git_add",
          "git_commit",
          "git_push",
          "git_pull",
          "git_fetch",
          "git_merge",
          "git_rebase",
          "git_cherry_pick",
          "git_revert",
          "git_reset",
          "git_clean",
          "git_stash",
          "git_submodule",
          "git_worktree",
          "git_bisect",
          "git_blame",
          "git_grep",
          "git_clone",
          "git_init",
          "git_remote",
          "git_config",
          "git_tag"
        ],
        "installation": "npm install -g git-mcp-server"
      }
    },
    "github": {
      "type": "remote",
      "url": "https://api.githubcopilot.com/mcp/",
      "enabled": true,
      "oauth": {},
      "metadata": {
        "description": "GitHub API integration for issues, pull requests, and repository operations",
        "required_env": [],
        "optional_env": [
          "GITHUB_TOKEN"
        ],
        "tools": [
          "github_issue_*",
          "github_pr_*",
          "github_repo_*",
          "github_commit_*",
          "github_branch_*",
          "github_label_*",
          "github_milestone_*",
          "github_release_*",
          "github_search_*",
          "github_user_*",
          "github_team_*",
          "github_workflow_*",
          "github_secret_*",
          "github_codespace_*",
          "github_copilot_*",
          "github_dependabot_*",
          "github_security_*",
          "github_codesecurity_*",
          "github_license_*",
          "github_webhook_*",
          "github_page_*",
          "github_gist_*",
          "github_action_*",
          "github_runner_*",
          "github_package_*",
          "github_registry_*",
          "github_project_*",
          "github_discussion_*",
          "github_comment_*",
          "github_reaction_*",
          "github_check_*",
          "github_status_*",
          "github_deployment_*",
          "github_environment_*",
          "github_tag_*",
          "github_ref_*",
          "github_pull_*",
          "github_push_*",
          "github_merge_*",
          "github_diff_*",
          "github_file_*",
          "github_blob_*",
          "github_tree_*",
          "github_commit_*",
          "github_ref_*",
          "github_tag_*",
          "github_branch_*",
          "github_merge_*",
          "github_pull_*",
          "github_push_*",
          "github_clone_*",
          "github_fetch_*",
          "github_pull_*",
          "github_push_*",
          "github_merge_*",
          "github_rebase_*",
          "github_cherry_pick_*",
          "github_revert_*",
          "github_reset_*",
          "github_clean_*",
          "github_stash_*",
          "github_submodule_*",
          "github_worktree_*",
          "github_bisect_*",
          "github_blame_*",
          "github_log_*",
          "github_show_*",
          "github_diff_*",
          "github_grep_*"
        ],
        "documentation": "https://docs.github.com/en/rest"
      }
    },
    "filesystem": {
      "type": "local",
      "command": [
        "npx",
        "-y",
        "@modelcontextprotocol/server-filesystem"
      ],
      "enabled": false,
      "metadata": {
        "description": "File system operations for reading and writing files",
        "required_env": [],
        "optional_env": [],
        "tools": [
          "read_file",
          "write_file",
          "list_directory",
          "create_directory",
          "move_file",
          "search_files",
          "get_file_info"
        ],
        "notes": "Disabled by default for security. Enable only when needed."
      }
    }
  },
  "agent": {
    "code-reviewer": {
      "description": "Performs thorough code reviews focusing on correctness, security, performance, and maintainability",
      "model": "anthropic/claude-3-5-sonnet",
      "tools": {
        "Read": true,
        "Grep": true,
        "git_*": true,
        "complexity-analyzer": true
      },
      "prompt": "You are an expert code reviewer with deep knowledge of software engineering best practices.\n\nYour review focuses on:\n1. Correctness - Does the code work as intended?\n2. Security - Are there vulnerabilities?\n3. Performance - Any obvious bottlenecks?\n4. Maintainability - Is the code readable and well-structured?\n5. Testing - Is there adequate coverage?\n\nReview approach:\n- First understand the context and purpose\n- Review architecture and design decisions\n- Check for correctness and edge cases\n- Identify security issues\n- Assess performance implications\n- Evaluate readability and maintainability\n\nFeedback style:\n- Be specific and actionable\n- Explain the reasoning behind suggestions\n- Balance critical feedback with positive notes\n- Prioritize issues by severity\n- Suggest concrete improvements\n\nYou have access to complexity analysis tools to help identify complex code.\n"
    },
    "feature-orchestrator": {
      "description": "Orchestrates the planning and implementation of new features from backlog to completion",
      "model": "anthropic/claude-3-5-sonnet",
      "tools": {
        "github_*": true,
        "git_*": true,
        "Read": true,
        "Grep": true,
        "Write": true,
        "Edit": true,
        "Bash": true
      },
      "prompt": "You are a senior software architect and developer who excels at planning and implementing features.\n\nYour workflow:\n1. Discovery - Check for existing backlog/features file\n2. Selection - Help choose which feature to work on\n3. Analysis - Understand requirements and technical approach\n4. Planning - Create technical plan with task breakdown\n5. Branching - Set up isolated development environment\n6. Implementation - Build the feature incrementally\n7. Review - Ensure quality through code review practices\n\nBest practices:\n- Always clarify requirements before starting\n- Break work into small, testable increments\n- Use git worktrees for feature isolation\n- Update documentation as you go\n- Write tests for new functionality\n- Commit frequently with clear messages\n"
    },
    "issue-resolver": {
      "description": "Expert debugger that investigates and fixes GitHub issues systematically",
      "model": "anthropic/claude-3-5-sonnet",
      "tools": {
        "github_*": true,
        "git_*": true,
        "Read": true,
        "Grep": true,
        "Write": true,
        "Edit": true,
        "Bash": "ask"
      },
      "prompt": "You are an expert software engineer specializing in systematic debugging and issue resolution.\n\nYour approach:\n1. Always fully understand the problem before attempting fixes\n2. Search the codebase thoroughly to find relevant code\n3. Create minimal reproduction scripts for bugs\n4. Implement the smallest fix that solves the root cause\n5. Verify fixes with tests\n6. Follow existing code style and patterns\n\nWhen working with GitHub issues:\n- Read the full issue description and comments\n- Check for related issues or PRs\n- Look at recent commits that might have introduced the bug\n- Consider edge cases and side effects\n\nYou have access to GitHub and Git MCP servers for repository operations.\n"
    }
  },
  "rules": [
    "# Rule: TypeScript Standards\n\nFollow TypeScript best practices for type safety, readability, and maintainability.\n\n## Type Safety\n\n**Always Use Types:**\n```typescript\n// BAD\nfunction process(data) {\n  return data.map(x => x.value);\n}\n\n// GOOD\ninterface DataItem {\n  value: string;\n}\n\nfunction process(data: DataItem[]): string[] {\n  return data.map(x => x.value);\n}\n```\n\n**Avoid `any`:**\n```typescript\n// BAD\nfunction parse(input: any): any {\n  return JSON.parse(input);\n}\n\n// GOOD\nfunction parse<T>(input: string): T {\n  return JSON.parse(input);\n}\n```\n\n**Use Strict Null Checks:**\n```typescript\n// BAD\nfunction getUser(id: number): User {\n  return database.findUser(id); // Might be undefined\n}\n\n// GOOD\nfunction getUser(id: number): User | undefined {\n  return database.findUser(id);\n}\n\n// Or throw if required\nfunction getUserOrThrow(id: number): User {\n  const user = database.findUser(id);\n  if (!user) throw new Error(`User ${id} not found`);\n  return user;\n}\n```\n\n## Naming Conventions\n\n**Types/Interfaces:** PascalCase\n```typescript\ninterface UserProfile {\n  firstName: string;\n}\n\ntype UserStatus = 'active' | 'inactive';\n```\n\n**Functions/Variables:** camelCase\n```typescript\nconst userName = 'John';\nfunction getUserName(): string {\n  return userName;\n}\n```\n\n**Constants:** UPPER_SNAKE_CASE\n```typescript\nconst MAX_RETRY_COUNT = 3;\nconst API_BASE_URL = 'https://api.example.com';\n```\n\n**Enums:** PascalCase for name, PascalCase for members\n```typescript\nenum UserRole {\n  Admin = 'ADMIN',\n  User = 'USER',\n  Guest = 'GUEST'\n}\n```\n\n## Code Organization\n\n**Prefer Interfaces over Type Aliases for Objects:**\n```typescript\n// GOOD\ninterface User {\n  id: number;\n  name: string;\n}\n\n// Acceptable for unions\ntype Status = 'active' | 'inactive';\n```\n\n**Use Readonly for Immutable Data:**\n```typescript\ninterface Config {\n  readonly apiKey: string;\n  readonly timeout: number;\n}\n```\n\n**Explicit Return Types for Public APIs:**\n```typescript\n// GOOD\nexport function calculateTotal(items: Item[]): number {\n  return items.reduce((sum, item) => sum + item.price, 0);\n}\n```\n\n## Error Handling\n\n**Use Discriminated Unions for Errors:**\n```typescript\ntype Result<T> = \n  | { success: true; data: T }\n  | { success: false; error: string };\n\nfunction process(): Result<Data> {\n  try {\n    const data = doSomething();\n    return { success: true, data };\n  } catch (error) {\n    return { success: false, error: error.message };\n  }\n}\n```\n\n**Never Ignore Promises:**\n```typescript\n// BAD\nasync function init() {\n  loadData(); // Promise ignored\n}\n\n// GOOD\nasync function init() {\n  await loadData();\n}\n```\n\n## Review Checklist\n\n- [ ] Functions have explicit return types\n- [ ] No implicit `any` types\n- [ ] Proper null/undefined handling\n- [ ] Readonly used where appropriate\n- [ ] Naming conventions followed\n- [ ] Interfaces preferred over type aliases for objects\n- [ ] Error handling is explicit\n- [ ] Promises are properly awaited",
    "# Rule: No Secrets in Code\n\nNever hardcode secrets, API keys, passwords, or credentials in source code.\n\n## Prohibited Patterns\n\n**Hardcoded Secrets:**\n```javascript\n// BAD\nconst apiKey = \"sk-1234567890abcdef\";\nconst password = \"supersecret123\";\nconst token = \"ghp_xxxxxxxxxxxx\";\n```\n\n**Configuration with Secrets:**\n```yaml\n# BAD\ndatabase:\n  password: \"mydbpassword123\"\n```\n\n## Allowed Patterns\n\n**Environment Variables:**\n```javascript\n// GOOD\nconst apiKey = process.env.API_KEY;\n```\n\n**Configuration Files (not committed):**\n```javascript\n// GOOD - from .env file (gitignored)\nconst config = require('./.env');\n```\n\n**Secret Management Services:**\n```javascript\n// GOOD\nconst secret = await secretManager.getSecret('api-key');\n```\n\n## Detection Patterns\n\nWatch for:\n- `password`, `secret`, `token`, `key` followed by `=` and a quoted string\n- `API_KEY`, `SECRET_KEY`, `AUTH_TOKEN` assignments\n- Base64 encoded strings that look like credentials\n- Private keys (BEGIN PRIVATE KEY, BEGIN RSA PRIVATE KEY)\n- Hardcoded database connection strings with passwords\n\n## Review Checklist\n\n- [ ] No hardcoded passwords\n- [ ] No hardcoded API keys\n- [ ] No hardcoded tokens\n- [ ] No private keys in code\n- [ ] No database passwords in connection strings\n- [ ] Secrets loaded from environment or secure storage\n- [ ] `.env` files are in `.gitignore`",
    "# Rule: Input Validation\n\nAll user inputs must be validated before processing to prevent security vulnerabilities.\n\n## Requirements\n\n**Validate Input Type:**\n```python\n# GOOD\nuser_id = request.args.get('id')\nif not user_id or not user_id.isdigit():\n    return error(\"Invalid user ID\")\nuser_id = int(user_id)\n```\n\n**Validate Input Length:**\n```python\n# GOOD\nusername = request.json.get('username', '')\nif len(username) < 3 or len(username) > 50:\n    return error(\"Username must be 3-50 characters\")\n```\n\n**Validate Input Format:**\n```python\n# GOOD\nimport re\nemail = request.json.get('email', '')\nif not re.match(r'^[\\w\\.-]+@[\\w\\.-]+\\.\\w+$', email):\n    return error(\"Invalid email format\")\n```\n\n**Sanitize Input:**\n```python\n# GOOD\nfrom markupsafe import escape\nuser_input = request.form.get('comment', '')\nsafe_input = escape(user_input)  # Prevents XSS\n```\n\n## Common Vulnerabilities\n\n**SQL Injection:**\n```python\n# BAD\ncursor.execute(f\"SELECT * FROM users WHERE id = {user_id}\")\n\n# GOOD\ncursor.execute(\"SELECT * FROM users WHERE id = ?\", (user_id,))\n```\n\n**Command Injection:**\n```python\n# BAD\nos.system(f\"ping {hostname}\")\n\n# GOOD\nsubprocess.run([\"ping\", \"-c\", \"4\", hostname], check=True)\n```\n\n**Path Traversal:**\n```python\n# BAD\nwith open(f\"/data/{filename}\") as f:\n    content = f.read()\n\n# GOOD\nfrom pathlib import Path\nbase_path = Path(\"/data\")\nfile_path = (base_path / filename).resolve()\nif not str(file_path).startswith(str(base_path)):\n    return error(\"Invalid path\")\n```\n\n## Review Checklist\n\n- [ ] All user inputs are validated\n- [ ] Input type is checked\n- [ ] Input length is limited\n- [ ] Input format is validated\n- [ ] SQL queries use parameterized statements\n- [ ] No shell commands with user input\n- [ ] File paths are validated and sanitized\n- [ ] Special characters are escaped when needed",
    "# Rule: Microservices Architecture\n\nGuidelines for designing, implementing, and reviewing microservices-based systems.\n\n## Service Boundaries\n\n**Single Responsibility:**\n- Each service should have one clear purpose\n- Services should be loosely coupled\n- Avoid shared databases between services\n\n**Domain-Driven Design:**\n- Align service boundaries with business domains\n- Use bounded contexts to define service scope\n- Services should own their data\n\n## Communication\n\n**Inter-Service Communication:**\n- Prefer async messaging (queues, events) over sync calls\n- Use circuit breakers for external service calls\n- Implement proper timeout and retry strategies\n\n**API Design:**\n- Use RESTful or GraphQL APIs consistently\n- Version APIs to allow independent deployment\n- Document APIs with OpenAPI/Swagger\n\n## Data Management\n\n**Database per Service:**\n- Each service owns its database\n- No direct database access between services\n- Use APIs or events for data sharing\n\n**Event Sourcing:**\n- Consider event sourcing for audit trails\n- Use CQRS when read/write patterns differ significantly\n\n## Deployment\n\n**Containerization:**\n- Containerize all services\n- Use Docker or similar container runtime\n- Keep images small and secure\n\n**Orchestration:**\n- Use Kubernetes or similar for orchestration\n- Implement health checks and readiness probes\n- Configure proper resource limits\n\n## Observability\n\n**Logging:**\n- Centralized logging (ELK stack, Loki)\n- Correlation IDs across service calls\n- Structured logging format\n\n**Monitoring:**\n- Metrics collection (Prometheus, Grafana)\n- Distributed tracing (Jaeger, Zipkin)\n- Alerting on critical thresholds\n\n## Review Checklist\n\n- [ ] Service boundaries align with business domains\n- [ ] Services are loosely coupled\n- [ ] Database per service pattern followed\n- [ ] Async communication preferred\n- [ ] APIs are documented and versioned\n- [ ] Proper error handling and retries\n- [ ] Health checks implemented\n- [ ] Observability (logs, metrics, traces)",
    "# Rule: Performance Efficiency\n\nGuidelines for writing efficient, performant code.\n\n## Algorithmic Efficiency\n\n**Time Complexity:**\n- Be aware of Big O complexity\n- Prefer O(log n) over O(n) when possible\n- Avoid O(n\u00b2) or worse for large datasets\n\n**Space Complexity:**\n- Minimize memory usage\n- Use generators for large datasets\n- Avoid unnecessary data copying\n\n## Database Performance\n\n**Query Optimization:**\n- Use indexes appropriately\n- Avoid N+1 queries\n- Select only needed columns\n- Use EXPLAIN to analyze queries\n\n**Connection Management:**\n- Use connection pooling\n- Keep connections short-lived\n- Handle connection errors gracefully\n\n## Caching\n\n**When to Cache:**\n- Expensive computations\n- Database query results\n- External API responses\n\n**Cache Strategies:**\n- TTL (Time To Live) for time-based expiration\n- LRU (Least Recently Used) for size-limited caches\n- Cache invalidation on data changes\n\n## Network Efficiency\n\n**Minimize Requests:**\n- Batch operations when possible\n- Use pagination for large datasets\n- Compress request/response bodies\n\n**Asynchronous Operations:**\n- Use async/await for I/O operations\n- Don't block the event loop\n- Implement proper timeout handling\n\n## Resource Management\n\n**Memory:**\n- Close files and connections properly\n- Clear references to allow GC\n- Use streams for large files\n\n**CPU:**\n- Offload heavy computation to worker threads\n- Use efficient data structures\n- Profile to identify bottlenecks\n\n## Review Checklist\n\n- [ ] Time complexity is appropriate for data size\n- [ ] Database queries are optimized\n- [ ] No N+1 query problems\n- [ ] Caching used where beneficial\n- [ ] Network requests are batched\n- [ ] Async operations don't block\n- [ ] Resources are properly released\n- [ ] No obvious memory leaks"
  ],
  "tools": {}
}